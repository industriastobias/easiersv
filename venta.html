<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productos Vendidos</title>
    <style>
        /* ---------- TRANSICI√ìN SUAVE ENTRE P√ÅGINAS ---------- */
        html {
            animation: fadeIn 0.4s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* ---------- VARIABLES PROFESIONALES ---------- */
        :root{
          --bg:#f8fafc;               /* gris muy claro */
          --card:#ffffffdd;
          --text:#1e293b;             /* azul oscuro */
          --accent:#2563eb;           /* azul profesional */
          --danger:#dc2626;
          --sidebar:#1e293b;
          --sidebar-text:#cbd5e1;
          --radius:12px;
          --shadow:0 6px 24px rgba(0,0,0,.06);
          --blur:8px;
        }
        [data-theme="dark"]{
          --bg:#0f172a;
          --card:#1e293bbb;
          --text:#f1f5f9;
          --accent:#3b82f6;
          --danger:#ef4444;
          --sidebar:#0b1220;
          --sidebar-text:#94a3b8;
        }

        /* ---------- BASE ---------- */
        *{box-sizing:border-box;margin:0;padding:0;font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;}
        body{
          height:100vh;
          display:flex;
          background:var(--bg);
          color:var(--text);
          overflow:hidden;
          background-image:linear-gradient(135deg,var(--accent) 0%,#475569 100%);
          transition:background .4s;
        }

        /* ---------- SIDEBAR ---------- */
        .sidebar{
          width:220px;
          background:var(--sidebar);
          color:var(--sidebar-text);
          padding:32px 20px;
          display:flex;
          flex-direction:column;
          gap:24px;
        }
        .sidebar h2{font-size:1.1rem;font-weight:600;letter-spacing:.5px;}
        .sidebar a{
          color:var(--sidebar-text);
          text-decoration:none;
          font-size:.875rem;
          padding:10px 14px;
          border-radius:var(--radius);
          transition:.2s;
        }
        .sidebar a:hover{background:#ffffff11;}

        /* ---------- MAIN ---------- */
        .main{
          flex:1;
          padding:40px;
          overflow-y:auto;
          display:flex;
          flex-direction:column;
          gap:24px;
        }
        .header{
          display:flex;
          justify-content:space-between;
          align-items:center;
        }
        .header h1{font-size:2rem;font-weight:700;}
        .total-box{
          background:var(--card);
          padding:12px 20px;
          border-radius:var(--radius);
          box-shadow:var(--shadow);
          font-size:1.1rem;
          font-weight:600;
        }
        .theme-toggle{
          cursor:pointer;
          font-size:1.4rem;
          padding:8px;
          border-radius:50%;
          transition:.2s;
        }
        .theme-toggle:hover{background:#00000011;}

        /* ---------- CONTROLES ---------- */
        .controls{
          display:flex;
          gap:12px;
          flex-wrap:wrap;
        }
        .controls input,
        .controls select,
        .controls button{
          padding:10px 14px;
          border:none;
          border-radius:var(--radius);
          background:var(--card);
          color:var(--text);
          backdrop-filter:blur(var(--blur));
          box-shadow:var(--shadow);
          font-size:.875rem;
        }
        .controls button{
          background:var(--accent);
          color:#fff;
          cursor:pointer;
          font-weight:600;
        }
        .controls button:hover{opacity:.9;}

        /* ---------- CARDS ---------- */
        .cards-grid{
          display:grid;
          grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
          gap:20px;
        }
        .card{
          background:var(--card);
          border-radius:var(--radius);
          padding:24px;
          box-shadow:var(--shadow);
          backdrop-filter:blur(var(--blur));
          display:flex;
          flex-direction:column;
          gap:12px;
          transition:.3s;
        }
        .card:hover{transform:translateY(-4px);}
        .card-header{
          display:flex;
          justify-content:space-between;
          align-items:center;
        }
        .card-title{font-size:1.1rem;font-weight:600;}
        .card-code{font-size:.75rem;color:var(--sidebar-text);}
        .card-price{font-size:1.5rem;font-weight:700;color:var(--accent);}
        .card-footer{
          display:flex;
          justify-content:space-between;
          align-items:center;
          margin-top:auto;
        }
        .card-total{font-weight:600;}
        .card-delete{
          background:var(--danger);
          color:#fff;
          border:none;
          padding:6px 12px;
          border-radius:8px;
          font-size:.75rem;
          cursor:pointer;
        }

        /* ---------- PAGINACI√ìN ---------- */
        .pagination{
          display:flex;
          justify-content:center;
          gap:12px;
          margin-top:auto;
        }
        .pagination button{
          padding:8px 16px;
          border:none;
          border-radius:var(--radius);
          background:var(--card);
          color:var(--text);
          box-shadow:var(--shadow);
          cursor:pointer;
          font-weight:600;
        }
        .pagination button:hover{background:var(--accent);color:#fff;}
    </style>
</head>
<body>
  <!-- Sidebar -->
  <nav class="sidebar">
    <h2>AESIERSV</h2>
    <a href="menu.html">üìã Men√∫</a>
    <a href="#">üì¶ Productos Vendidos</a>
    <a href="#">üìä Estad√≠sticas</a>
    <a href="#">‚öôÔ∏è Configuraci√≥n</a>
    <a href="index.html">üö™ Cerrar Sesi√≥n</a>
  </nav>

  <!-- Contenido principal -->
  <main class="main">
    <header class="header">
      <h1>Ventas Realizadas</h1>
      <div class="total-box" id="totalUSD">Total vendido: $0.00 USD</div>
      <span class="theme-toggle" onclick="toggleTheme()">üåó</span>
    </header>

    <div class="controls">
      <input type="text" id="filterName" placeholder="Filtrar por nombre">
      <input type="text" id="filterCode" placeholder="Filtrar por c√≥digo">
      <select id="rowsPerPage" onchange="loadSoldInventory()">
        <option value="10">10</option>
        <option value="25">25</option>
        <option value="50">50</option>
      </select>
      <button onclick="generateDocx()">üìÑ Exportar DOCX</button>
      <button onclick="exportExcel()">üìä Exportar Excel</button>
    </div>

    <!-- Tarjetas -->
    <section class="cards-grid" id="soldInventoryList"></section>

    <div class="pagination">
      <button onclick="prevPage()">‚Üê Anterior</button>
      <button onclick="nextPage()">Siguiente ‚Üí</button>
    </div>
  </main>

  <script>
    let soldInventory = JSON.parse(localStorage.getItem('soldInventory')) || [];
    let currentPage = 1;
    let rowsPerPage = 10;

    function loadSoldInventory() {
      const nameFilter = document.getElementById('filterName').value.toLowerCase();
      const codeFilter = document.getElementById('filterCode').value.toLowerCase();
      rowsPerPage = parseInt(document.getElementById('rowsPerPage').value);

      const filtered = soldInventory.filter(item =>
        item.name.toLowerCase().includes(nameFilter) &&
        item.code.toLowerCase().includes(codeFilter)
      );

      // TOTAL EN USD
      const total = filtered.reduce((sum, item) => sum + item.total, 0);
      document.getElementById('totalUSD').textContent = `Total vendido: $${total.toFixed(2)} USD`;

      const start = (currentPage - 1) * rowsPerPage;
      const paginated = filtered.slice(start, start + rowsPerPage);

      const container = document.getElementById('soldInventoryList');
      container.innerHTML = paginated.map((item, i) => `
        <div class="card">
          <div class="card-header">
            <div class="card-title">${item.name}</div>
            <div class="card-code">${item.code}</div>
          </div>
          <div class="card-price">$${item.price}</div>
          <div>Cantidad vendida: ${item.quantity}</div>
          <div class="card-footer">
            <div class="card-total">Total: $${item.total.toFixed(2)}</div>
            <button class="card-delete" onclick="deleteSoldItem(${start + i})">Eliminar</button>
          </div>
        </div>
      `).join('');
    }

    window.deleteSoldItem = function (index) {
      soldInventory.splice(index, 1);
      localStorage.setItem('soldInventory', JSON.stringify(soldInventory));
      loadSoldInventory();
    };

    function toggleTheme() {
      const html = document.documentElement;
      html.setAttribute('data-theme', html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
    }

    function prevPage() {
      if (currentPage > 1) { currentPage--; loadSoldInventory(); }
    }

    function nextPage() {
      const filtered = soldInventory.filter(item =>
        item.name.toLowerCase().includes(document.getElementById('filterName').value.toLowerCase()) &&
        item.code.toLowerCase().includes(document.getElementById('filterCode').value.toLowerCase())
      );
      if (currentPage < Math.ceil(filtered.length / rowsPerPage)) { currentPage++; loadSoldInventory(); }
    }

    function generateDocx() { alert('Exportar DOCX (simulado)'); }
    function exportExcel() { alert('Exportar Excel (simulado)'); }

    document.getElementById('filterName').addEventListener('input', () => { currentPage = 1; loadSoldInventory(); });
    document.getElementById('filterCode').addEventListener('input', () => { currentPage = 1; loadSoldInventory(); });

    loadSoldInventory();
  </script>
</body>
</html>
